<div class="dropdown">
    <a class="nav-link dropdown-toggle" href="#" id="notificationDropdown" role="button" data-bs-toggle="dropdown">
        <i class="fas fa-bell"></i>
        <span id="notification-count" class="badge bg-danger notification-badge" 
              style="{% if not unread_notifications %}display: none;{% endif %}">
            {{ unread_notifications|default:0 }}
        </span>
    </a>
    <div class="dropdown-menu dropdown-menu-end notification-dropdown" aria-labelledby="notificationDropdown">
        <div class="dropdown-header d-flex justify-content-between align-items-center">
            <h6 class="mb-0">Notifications</h6>
            {% if unread_notifications %}
                <button class="btn btn-sm btn-link text-decoration-none" onclick="markAllAsRead()">
                    Mark all as read
                </button>
            {% endif %}
        </div>
        <div id="notification-list" class="notification-list">
            {% for notification in notifications %}
                <div class="notification-item {% if not notification.is_read %}unread{% endif %}" 
                     data-id="{{ notification.id }}">
                    <div class="notification-content">
                        <p class="mb-0">{{ notification.message }}</p>
                        <small class="text-muted">{{ notification.created_at|timesince }} ago</small>
                    </div>
                </div>
            {% empty %}
                <div class="text-center p-3">
                    <p class="text-muted mb-0">No notifications</p>
                </div>
            {% endfor %}
        </div>
        <div class="dropdown-footer">
            <a href="{% url 'notifications' %}" class="btn btn-link btn-sm text-decoration-none w-100">
                View All Notifications
            </a>
        </div>
    </div>
</div> 